#!/bin/bash
# kubctl-0x02: Apply blue-green deployments and check logs

set -e

echo "ğŸš€ Applying blue deployment..."
kubectl apply -f messaging_app/blue_deployment.yaml

echo "ğŸš€ Applying green deployment..."
kubectl apply -f messaging_app/green_deployment.yaml

echo "âœ… Deployments applied. Checking pods..."
kubectl get pods -l app=messaging-app -o wide

echo "ğŸ“‹ Checking logs for green deployment..."
GREEN_POD=$(kubectl get pods -l app=messaging-app,version=green -o jsonpath='{.items[0].metadata.name}')
kubectl logs $GREEN_POD || echo "âš ï¸ No logs yet for green pod"

echo "ğŸ¯ Blue-Green deployment setup complete!"
